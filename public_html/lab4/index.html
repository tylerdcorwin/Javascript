<!DOCTYPE html>
<html>
    <head>
        <title> JavaScript - Lab4 </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>

        <h1> Agreement Page </h1>
        <form name="mainform" id="mainform" action="" class="basic-grey">
            <div id="content" class="contentBox">
                <fieldset>

                    <legend>Personal information</legend> 
                    <label for="fullname">Name:</label> 
                    <input id="fullname" name="name" type="text" size="30" placeholder="Full name" />
                    <span id="fullname_err"></span>

                    <label for="email">E-mail:</label> 
                    <input id="email" name="email" type="text" size="30" placeholder="sample@email.com" />
                    <span id="email_err"></span>

                    <label for="phone">Phone:</label> 
                    <input id="phone" name="phone" type="text" size="30" placeholder="xxx-xxx-xxxx" />
                    <span id="phone_err"></span>

                    <label for="description">Description:</label> 
                    <textarea id="description"></textarea>
                    <span id="description_err"></span>

                </fieldset>
            </div>



            <div id="section2" class="contentBox">

                <p> Please read and scroll the following document and agree to the terms and conditions. </p>

                <div class="scrollBoxWrapper">
                    <div id="agreeScroll" class="scrollBox">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla tincidunt libero sed mi egestas cursus. Mauris turpis odio, lacinia sed purus a, tincidunt tincidunt tortor. Ut molestie diam non lorem aliquet cursus. Suspendisse potenti. Phasellus in odio enim. Sed volutpat, purus ac laoreet pellentesque, sapien urna varius ipsum, eget volutpat nulla neque at felis. Curabitur blandit vitae nulla vitae consectetur. Pellentesque pellentesque orci leo, a pretium ante cursus vitae. Vestibulum venenatis vehicula aliquet. Pellentesque imperdiet aliquet odio quis viverra. Aliquam tincidunt aliquet euismod. In id ornare nunc, quis sodales nunc. Aliquam venenatis sed lacus eget tristique.
                        </p>
                        <p>
                            Nullam at odio eu urna dictum consectetur. Proin vitae vulputate odio, viverra imperdiet est. Aenean quam lectus, vehicula vitae euismod nec, luctus eget elit. Quisque consectetur non nisi tempor tempus. Etiam eleifend ipsum neque, sit amet cursus lectus feugiat sit amet. Curabitur laoreet, est suscipit imperdiet consequat, tortor diam venenatis mi, eget convallis est sem quis felis. Sed suscipit lorem scelerisque magna porttitor auctor. Aenean eget dui dignissim, iaculis tortor ut, blandit orci.
                        </p>
                        <p>
                            Duis iaculis sem neque, vitae imperdiet velit fringilla et. Nullam nunc justo, venenatis sit amet justo vel, convallis scelerisque metus. Quisque nec sodales lectus. Praesent sagittis augue sed dui euismod elementum. Maecenas vel nulla id massa pulvinar facilisis. Quisque aliquam nulla velit. In viverra tempus erat vitae egestas.
                        </p>
                        <p>
                            Nunc nec dapibus ante. Nullam dictum ut sem mollis pulvinar. Quisque tincidunt non erat vel convallis. Ut metus nibh, euismod in ultricies vel, congue eget metus. Sed laoreet lacinia sollicitudin. Mauris dictum diam et gravida ullamcorper. Fusce libero leo, ultricies pellentesque justo vitae, adipiscing dictum metus. Aenean convallis elit a iaculis imperdiet.
                        </p>
                        <p>
                            Cras aliquet neque et rhoncus mollis. Ut rhoncus elit neque, sit amet ullamcorper purus venenatis quis. Etiam molestie, libero nec commodo vestibulum, libero erat consequat lorem, eu elementum quam lacus et eros. Cras vitae lacus id felis euismod ullamcorper. Cras et leo quis tortor molestie vehicula. Sed lobortis mauris quis eleifend posuere. Suspendisse iaculis ultrices massa. Vivamus a libero vel mauris feugiat elementum. 
                        </p>
                    </div>
                </div>



                <label for="agree"> <input type="radio" id="agree" name="agreeForm" value="agree" disabled="disabled" />  I <strong>agree</strong> to the terms and conditions of the document</label>
                <br />
                <label for="notagree"> <input type="radio" id="notagree" name="agreeForm" value="notagree" disabled="disabled" />  I <strong>do not agree</strong> to the terms and conditions of the document</label>

                <br /><br />
                <input type="submit" id="submitAgreement" value="Continue" />
            </div>
        </form>

        <!--My div to populate with user info-->
        <div id="info" class ="content-box"> </div>


        <script type="text/javascript">

            var objDiv = document.querySelector('div.scrollBox');

            objDiv.addEventListener('scroll', checkPosition);

            //validates that the document within scroll has gone to the bottom

            function checkPosition() {
                console.clear();
                console.log(objDiv.scrollTop);
                console.log(objDiv.scrollHeight);
                console.log(objDiv.offsetHeight);

                if (objDiv.scrollTop == (objDiv.scrollHeight - objDiv.offsetHeight)) {
                    console.log('bottom');
                    agree.disabled = false;
                    notagree.disabled = false;
                }
            }



            //selector for the textboxes
            var nameBox = document.querySelector('#fullname');
            var emailBox = document.querySelector('#email');
            var phoneBox = document.querySelector('#phone');
            var descriptionBox = document.querySelector('#description');
            
            //selector for div & form
            var newDiv = document.querySelector('#info');
            var form = document.querySelector('#mainform');
            
            //event listener for submit
            mainform.addEventListener('submit', checkForm);

            function checkForm(e) {

                //bool validator
                var isValid = true;

                //selector for labels to turn red
                e.preventDefault();
                var lblName = document.querySelector('#content > fieldset > label:nth-child(2)');
                var lblEmail = document.querySelector('#content > fieldset > label:nth-child(5)');
                var lblPhone = document.querySelector('#content > fieldset > label:nth-child(8)');
                var lblDescription = document.querySelector('#content > fieldset > label:nth-child(11)');
                var lblAgree = document.querySelector('#section2 > label:nth-child(3)');
                var lblNotAgree = document.querySelector('#section2 > label:nth-child(5)');

                //radio button selectors
                var radioAgree = document.querySelector('#agree');
                var radioNotAgree = document.querySelector('#notagree');

                //validation for content in textboxes
                if (nameBox.value === '') {
                    lblName.classList.add('error');
                    isValid === false;
                }
                if (emailBox.value === '') {
                    lblEmail.classList.add('error');
                    isValid === false;
                }
                if (phoneBox.value === '') {
                    lblPhone.classList.add('error');
                    isValid === false;
                }
                if (descriptionBox.value === '') {
                    lblDescription.classList.add('error');
                    isValid === false;
                }
                if (radioAgree.checked === false && radioNotAgree.checked === false) {
                    lblAgree.classList.add('error');
                    lblNotAgree.classList.add('error');
                    isValid === false;
                } else {
                    lblAgree.classList.remove('error');
                    lblNotAgree.classList.remove('error');

                }
                //if all data is valid then hide form show data entered
                if (isValid === true) {
                    var html = '';
                    html += '<p> Name: ' + nameBox.value + '<p>' +
                            '<p> Email: ' + emailBox.value + '<p>' +
                            '<p> Phone: ' + phoneBox.value + '<p>' +
                            '<p> Description: ' + descriptionBox.value + '<p>';

                    newDiv.innerHTML += html;

                    form.classList.remove('show');
                    form.classList.add('hide');
                }                
            }



        </script>



    </body>
</html>